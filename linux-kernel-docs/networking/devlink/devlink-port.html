
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Devlink Port &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Devlink Region" href="devlink-region.html" />
    <link rel="prev" title="Devlink Params" href="devlink-params.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.3.0-rc7</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">A guide to the Kernel Development Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver implementer’s API guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../subsystem-apis.html">Kernel subsystem documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../driver-api/index.html">Driver implementer’s API guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cpu-freq/index.html">CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Networking</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../af_xdp.html">AF_XDP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bareudp.html">Bare UDP Tunnelling Module Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../batman-adv.html">batman-adv</a></li>
<li class="toctree-l3"><a class="reference internal" href="../can.html">SocketCAN - Controller Area Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../can_ucan_protocol.html">The UCAN Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../device_drivers/index.html">Hardware Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dsa/index.html">Distributed Switch Architecture</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Linux Devlink Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../caif/index.html">CAIF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ethtool-netlink.html">Netlink interface for ethtool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ieee802154.html">IEEE 802.15.4 Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../j1939.html">J1939 Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kapi.html">Linux Networking and Network Devices APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../msg_zerocopy.html">MSG_ZEROCOPY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../failover.html">FAILOVER</a></li>
<li class="toctree-l3"><a class="reference internal" href="../net_dim.html">Net DIM - Generic Network Dynamic Interrupt Moderation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../net_failover.html">NET_FAILOVER</a></li>
<li class="toctree-l3"><a class="reference internal" href="../page_pool.html">Page Pool API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../phy.html">PHY Abstraction Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sfp-phylink.html">phylink</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alias.html">IP-Aliasing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bridge.html">Ethernet Bridging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snmp_counter.html">SNMP counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../checksum-offloads.html">Checksum Offloads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../segmentation-offloads.html">Segmentation Offloads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scaling.html">Scaling in the Linux Networking Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tls.html">Kernel TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tls-offload.html">Kernel TLS offload</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nfc.html">Linux NFC subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6lowpan.html">Netdev private dataroom for 6lowpan interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6pack.html">6pack Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../arcnet-hardware.html">ARCnet Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../arcnet.html">ARCnet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../atm.html">ATM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ax25.html">AX.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bonding.html">Linux Ethernet Bonding Driver HOWTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cdc_mbim.html">cdc_mbim - Driver for CDC MBIM Mobile Broadband modems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dccp.html">DCCP protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dctcp.html">DCTCP (DataCenter TCP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dns_resolver.html">DNS Resolver Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../driver.html">Softnet Driver Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../eql.html">EQL Driver: Serial IP Load Balancing HOWTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fib_trie.html">LC-trie implementation notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../filter.html">Linux Socket Filtering aka Berkeley Packet Filter (BPF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../generic-hdlc.html">Generic HDLC layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../generic_netlink.html">Generic Netlink</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gen_stats.html">Generic networking statistics for netlink users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gtp.html">The Linux kernel GTP tunneling module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ila.html">Identifier Locator Addressing (ILA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ioam6-sysctl.html">IOAM6 Sysfs variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipddp.html">AppleTalk-IP Decapsulation and AppleTalk-IP Encapsulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ip_dynaddr.html">IP dynamic address hack-port v0.03</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipsec.html">IPsec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ip-sysctl.html">IP Sysctl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipv6.html">IPv6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipvlan.html">IPVLAN Driver HOWTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipvs-sysctl.html">IPvs-sysctl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kcm.html">Kernel Connection Multiplexor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../l2tp.html">L2TP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lapb-module.html">The Linux LAPB Module Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mac80211-injection.html">How to use packet injection with mac80211</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mctp.html">Management Component Transport Protocol (MCTP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mpls-sysctl.html">MPLS Sysfs variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mptcp-sysctl.html">MPTCP Sysfs variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiqueue.html">HOWTO for multiqueue network device support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../netconsole.html">Netconsole</a></li>
<li class="toctree-l3"><a class="reference internal" href="../netdev-features.html">Netdev features mess and how to get out from it alive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../netdevices.html">Network Devices, the Kernel, and You!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../netfilter-sysctl.html">Netfilter Sysfs variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../netif-msg.html">NETIF Msg Level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nexthop-group-resilient.html">Resilient Next-hop Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nf_conntrack-sysctl.html">Netfilter Conntrack Sysfs variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nf_flowtable.html">Netfilter’s flowtable infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openvswitch.html">Open vSwitch datapath developer documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operstates.html">Operational States</a></li>
<li class="toctree-l3"><a class="reference internal" href="../packet_mmap.html">Packet MMAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../phonet.html">Linux Phonet protocol family</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pktgen.html">HOWTO for the linux packet generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plip.html">PLIP: The Parallel Line Internet Protocol Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ppp_generic.html">PPP Generic Driver and Channel Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proc_net_tcp.html">The proc/net/tcp and proc/net/tcp6 variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../radiotap-headers.html">How to use radiotap headers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rds.html">RDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../regulatory.html">Linux wireless regulatory documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../representors.html">Network Function Representors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rxrpc.html">RxRPC Network Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rxrpc.html#socket-options">SOCKET OPTIONS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rxrpc.html#security">SECURITY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rxrpc.html#example-client-usage">EXAMPLE CLIENT USAGE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sctp.html">Linux Kernel SCTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../secid.html">LSM/SeLinux secid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seg6-sysctl.html">Seg6 Sysfs variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../skbuff.html">struct sk_buff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../smc-sysctl.html">SMC Sysctl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../statistics.html">Interface statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../strparser.html">Stream Parser (strparser)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../switchdev.html">Ethernet switch device driver model (switchdev)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sysfs-tagging.html">Sysfs tagging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tc-actions-env-rules.html">TC Actions - Environmental Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tc-queue-filters.html">TC queue based filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tcp-thin.html">Thin-streams and TCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../team.html">Team</a></li>
<li class="toctree-l3"><a class="reference internal" href="../timestamping.html">Timestamping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tipc.html">Linux Kernel TIPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tproxy.html">Transparent proxy support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tuntap.html">Universal TUN/TAP device driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../udplite.html">The UDP-Lite protocol (RFC 3828)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vrf.html">Virtual Routing and Forwarding (VRF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vxlan.html">Virtual eXtensible Local Area Networking documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../x25-iface.html">Packet Layer to Device Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../x25-iface.html#device-driver-to-packet-layer">Device Driver to Packet Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../x25-iface.html#requirements-for-the-device-driver">Requirements for the device driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../x25.html">Linux X.25 Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xfrm_device.html">XFRM device - offloading the IPsec computations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xfrm_proc.html">XFRM proc - /proc/net/xfrm_* files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xfrm_sync.html">XFRM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xfrm_sysctl.html">XFRM Syscall</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xdp-rx-metadata.html">XDP RX Metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../watchdog/index.html">Watchdog Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../virt/index.html">Virtualization Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../input/index.html">Input Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hwmon/index.html">Hardware Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gpu/index.html">GPU Driver Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accel/index.html">Compute Accelerators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sound/index.html">Sound Subsystem Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Crypto API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mm/index.html">Memory Management Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../PCI/index.html">PCI Bus Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scsi/index.html">SCSI Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scheduler/index.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../peci/index.html">PECI Subsystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking in the kernel</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Linux kernel licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Kernel Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">The kernel build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">User-space tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  sbar.scrollTop = currents[currents.length - 1].offsetTop;
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/networking/devlink/devlink-port.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="devlink-port">
<span id="id1"></span><h1>Devlink Port<a class="headerlink" href="#devlink-port" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">devlink-port</span></code> is a port that exists on the device. It has a logically
separate ingress/egress point of the device. A devlink port can be any one
of many flavours. A devlink port flavour along with port attributes
describe what a port represents.</p>
<p>A device driver that intends to publish a devlink port sets the
devlink port attributes and registers the devlink port.</p>
<p>Devlink port flavours are described below.</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">List of devlink port flavours</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Flavour</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_FLAVOUR_PHYSICAL</span></code></p></td>
<td><p>Any kind of physical port. This can be an eswitch physical port or any
other physical port on the device.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_FLAVOUR_DSA</span></code></p></td>
<td><p>This indicates a DSA interconnect port.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_FLAVOUR_CPU</span></code></p></td>
<td><p>This indicates a CPU port applicable only to DSA.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_FLAVOUR_PCI_PF</span></code></p></td>
<td><p>This indicates an eswitch port representing a port of PCI
physical function (PF).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_FLAVOUR_PCI_VF</span></code></p></td>
<td><p>This indicates an eswitch port representing a port of PCI
virtual function (VF).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_FLAVOUR_PCI_SF</span></code></p></td>
<td><p>This indicates an eswitch port representing a port of PCI
subfunction (SF).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_FLAVOUR_VIRTUAL</span></code></p></td>
<td><p>This indicates a virtual port for the PCI virtual function.</p></td>
</tr>
</tbody>
</table>
<p>Devlink port can have a different type based on the link layer described below.</p>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">List of devlink port types</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_TYPE_ETH</span></code></p></td>
<td><p>Driver should set this port type when a link layer of the port is
Ethernet.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_TYPE_IB</span></code></p></td>
<td><p>Driver should set this port type when a link layer of the port is
InfiniBand.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DEVLINK_PORT_TYPE_AUTO</span></code></p></td>
<td><p>This type is indicated by the user when driver should detect the port
type automatically.</p></td>
</tr>
</tbody>
</table>
<section id="pci-controllers">
<h2>PCI controllers<a class="headerlink" href="#pci-controllers" title="Permalink to this headline">¶</a></h2>
<p>In most cases a PCI device has only one controller. A controller consists of
potentially multiple physical, virtual functions and subfunctions. A function
consists of one or more ports. This port is represented by the devlink eswitch
port.</p>
<p>A PCI device connected to multiple CPUs or multiple PCI root complexes or a
SmartNIC, however, may have multiple controllers. For a device with multiple
controllers, each controller is distinguished by a unique controller number.
An eswitch is on the PCI device which supports ports of multiple controllers.</p>
<p>An example view of a system with two controllers:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>             ---------------------------------------------------------
             |                                                       |
             |           --------- ---------         ------- ------- |
-----------  |           | vf(s) | | sf(s) |         |vf(s)| |sf(s)| |
| server  |  | -------   ----/---- ---/----- ------- ---/--- ---/--- |
| pci rc  |=== | pf0 |______/________/       | pf1 |___/_______/     |
| connect |  | -------                       -------                 |
-----------  |     | controller_num=1 (no eswitch)                   |
             ------|--------------------------------------------------
             (internal wire)
                   |
             ---------------------------------------------------------
             | devlink eswitch ports and reps                        |
             | ----------------------------------------------------- |
             | |ctrl-0 | ctrl-0 | ctrl-0 | ctrl-0 | ctrl-0 |ctrl-0 | |
             | |pf0    | pf0vfN | pf0sfN | pf1    | pf1vfN |pf1sfN | |
             | ----------------------------------------------------- |
             | |ctrl-1 | ctrl-1 | ctrl-1 | ctrl-1 | ctrl-1 |ctrl-1 | |
             | |pf0    | pf0vfN | pf0sfN | pf1    | pf1vfN |pf1sfN | |
             | ----------------------------------------------------- |
             |                                                       |
             |                                                       |
-----------  |           --------- ---------         ------- ------- |
| smartNIC|  |           | vf(s) | | sf(s) |         |vf(s)| |sf(s)| |
| pci rc  |==| -------   ----/---- ---/----- ------- ---/--- ---/--- |
| connect |  | | pf0 |______/________/       | pf1 |___/_______/     |
-----------  | -------                       -------                 |
             |                                                       |
             |  local controller_num=0 (eswitch)                     |
             ---------------------------------------------------------
</pre></div>
</div>
<p>In the above example, the external controller (identified by controller number = 1)
doesn’t have the eswitch. Local controller (identified by controller number = 0)
has the eswitch. The Devlink instance on the local controller has eswitch
devlink ports for both the controllers.</p>
<section id="function-configuration">
<h3>Function configuration<a class="headerlink" href="#function-configuration" title="Permalink to this headline">¶</a></h3>
<p>Users can configure one or more function attributes before enumerating the PCI
function. Usually it means, user should configure function attribute
before a bus specific device for the function is created. However, when
SRIOV is enabled, virtual function devices are created on the PCI bus.
Hence, function attribute should be configured before binding virtual
function device to the driver. For subfunctions, this means user should
configure port function attribute before activating the port function.</p>
<p>A user may set the hardware address of the function using
<cite>devlink port function set hw_addr</cite> command. For Ethernet port function
this means a MAC address.</p>
<p>Users may also set the RoCE capability of the function using
<cite>devlink port function set roce</cite> command.</p>
<p>Users may also set the function as migratable using
‘devlink port function set migratable’ command.</p>
</section>
<section id="function-attributes">
<h3>Function attributes<a class="headerlink" href="#function-attributes" title="Permalink to this headline">¶</a></h3>
</section>
</section>
<section id="mac-address-setup">
<h2>MAC address setup<a class="headerlink" href="#mac-address-setup" title="Permalink to this headline">¶</a></h2>
<p>The configured MAC address of the PCI VF/SF will be used by netdevice and rdma
device created for the PCI VF/SF.</p>
<ul>
<li><p>Get the MAC address of the VF identified by its unique devlink port index:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ devlink port show pci/0000:06:00.0/2
pci/0000:06:00.0/2: type eth netdev enp6s0pf0vf1 flavour pcivf pfnum 0 vfnum 1
  function:
    hw_addr 00:00:00:00:00:00
</pre></div>
</div>
</li>
<li><p>Set the MAC address of the VF identified by its unique devlink port index:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ devlink port function set pci/0000:06:00.0/2 hw_addr 00:11:22:33:44:55

$ devlink port show pci/0000:06:00.0/2
pci/0000:06:00.0/2: type eth netdev enp6s0pf0vf1 flavour pcivf pfnum 0 vfnum 1
  function:
    hw_addr 00:11:22:33:44:55
</pre></div>
</div>
</li>
<li><p>Get the MAC address of the SF identified by its unique devlink port index:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ devlink port show pci/0000:06:00.0/32768
pci/0000:06:00.0/32768: type eth netdev enp6s0pf0sf88 flavour pcisf pfnum 0 sfnum 88
  function:
    hw_addr 00:00:00:00:00:00
</pre></div>
</div>
</li>
<li><p>Set the MAC address of the SF identified by its unique devlink port index:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ devlink port function set pci/0000:06:00.0/32768 hw_addr 00:00:00:00:88:88

$ devlink port show pci/0000:06:00.0/32768
pci/0000:06:00.0/32768: type eth netdev enp6s0pf0sf88 flavour pcisf pfnum 0 sfnum 88
  function:
    hw_addr 00:00:00:00:88:88
</pre></div>
</div>
</li>
</ul>
</section>
<section id="roce-capability-setup">
<h2>RoCE capability setup<a class="headerlink" href="#roce-capability-setup" title="Permalink to this headline">¶</a></h2>
<p>Not all PCI VFs/SFs require RoCE capability.</p>
<p>When RoCE capability is disabled, it saves system memory per PCI VF/SF.</p>
<p>When user disables RoCE capability for a VF/SF, user application cannot send or
receive any RoCE packets through this VF/SF and RoCE GID table for this PCI
will be empty.</p>
<p>When RoCE capability is disabled in the device using port function attribute,
VF/SF driver cannot override it.</p>
<ul>
<li><p>Get RoCE capability of the VF device:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ devlink port show pci/0000:06:00.0/2
pci/0000:06:00.0/2: type eth netdev enp6s0pf0vf1 flavour pcivf pfnum 0 vfnum 1
    function:
        hw_addr 00:00:00:00:00:00 roce enable
</pre></div>
</div>
</li>
<li><p>Set RoCE capability of the VF device:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ devlink port function set pci/0000:06:00.0/2 roce disable

$ devlink port show pci/0000:06:00.0/2
pci/0000:06:00.0/2: type eth netdev enp6s0pf0vf1 flavour pcivf pfnum 0 vfnum 1
    function:
        hw_addr 00:00:00:00:00:00 roce disable
</pre></div>
</div>
</li>
</ul>
</section>
<section id="migratable-capability-setup">
<h2>migratable capability setup<a class="headerlink" href="#migratable-capability-setup" title="Permalink to this headline">¶</a></h2>
<p>Live migration is the process of transferring a live virtual machine
from one physical host to another without disrupting its normal
operation.</p>
<p>User who want PCI VFs to be able to perform live migration need to
explicitly enable the VF migratable capability.</p>
<p>When user enables migratable capability for a VF, and the HV binds the VF to VFIO driver
with migration support, the user can migrate the VM with this VF from one HV to a
different one.</p>
<p>However, when migratable capability is enable, device will disable features which cannot
be migrated. Thus migratable cap can impose limitations on a VF so let the user decide.</p>
<p>Example of LM with migratable function configuration:
- Get migratable capability of the VF device:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ devlink port show pci/0000:06:00.0/2
pci/0000:06:00.0/2: type eth netdev enp6s0pf0vf1 flavour pcivf pfnum 0 vfnum 1
    function:
        hw_addr 00:00:00:00:00:00 migratable disable
</pre></div>
</div>
<ul>
<li><p>Set migratable capability of the VF device:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ devlink port function set pci/0000:06:00.0/2 migratable enable

$ devlink port show pci/0000:06:00.0/2
pci/0000:06:00.0/2: type eth netdev enp6s0pf0vf1 flavour pcivf pfnum 0 vfnum 1
    function:
        hw_addr 00:00:00:00:00:00 migratable enable
</pre></div>
</div>
</li>
<li><p>Bind VF to VFIO driver with migration support:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo &lt;pci_id&gt; &gt; /sys/bus/pci/devices/0000:08:00.0/driver/unbind
$ echo mlx5_vfio_pci &gt; /sys/bus/pci/devices/0000:08:00.0/driver_override
$ echo &lt;pci_id&gt; &gt; /sys/bus/pci/devices/0000:08:00.0/driver/bind
</pre></div>
</div>
</li>
</ul>
<p>Attach VF to the VM.
Start the VM.
Perform live migration.</p>
<section id="subfunction">
<h3>Subfunction<a class="headerlink" href="#subfunction" title="Permalink to this headline">¶</a></h3>
<p>Subfunction is a lightweight function that has a parent PCI function on which
it is deployed. Subfunction is created and deployed in unit of 1. Unlike
SRIOV VFs, a subfunction doesn’t require its own PCI virtual function.
A subfunction communicates with the hardware through the parent PCI function.</p>
<p>To use a subfunction, 3 steps setup sequence is followed:</p>
<ol class="arabic simple">
<li><p>create - create a subfunction;</p></li>
<li><p>configure - configure subfunction attributes;</p></li>
<li><p>deploy - deploy the subfunction;</p></li>
</ol>
<p>Subfunction management is done using devlink port user interface.
User performs setup on the subfunction management device.</p>
</section>
</section>
<section id="create">
<h2>(1) Create<a class="headerlink" href="#create" title="Permalink to this headline">¶</a></h2>
<p>A subfunction is created using a devlink port interface. A user adds the
subfunction by adding a devlink port of subfunction flavour. The devlink
kernel code calls down to subfunction management driver (devlink ops) and asks
it to create a subfunction devlink port. Driver then instantiates the
subfunction port and any associated objects such as health reporters and
representor netdevice.</p>
</section>
<section id="configure">
<h2>(2) Configure<a class="headerlink" href="#configure" title="Permalink to this headline">¶</a></h2>
<p>A subfunction devlink port is created but it is not active yet. That means the
entities are created on devlink side, the e-switch port representor is created,
but the subfunction device itself is not created. A user might use e-switch port
representor to do settings, putting it into bridge, adding TC rules, etc. A user
might as well configure the hardware address (such as MAC address) of the
subfunction while subfunction is inactive.</p>
</section>
<section id="deploy">
<h2>(3) Deploy<a class="headerlink" href="#deploy" title="Permalink to this headline">¶</a></h2>
<p>Once a subfunction is configured, user must activate it to use it. Upon
activation, subfunction management driver asks the subfunction management
device to instantiate the subfunction device on particular PCI function.
A subfunction device is created on the <a class="reference internal" href="../../driver-api/auxiliary_bus.html#auxiliary-bus"><span class="std std-ref">Documentation/driver-api/auxiliary_bus.rst</span></a>.
At this point a matching subfunction driver binds to the subfunction’s auxiliary device.</p>
<section id="rate-object-management">
<h3>Rate object management<a class="headerlink" href="#rate-object-management" title="Permalink to this headline">¶</a></h3>
<p>Devlink provides API to manage tx rates of single devlink port or a group.
This is done through rate objects, which can be one of the two types:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">leaf</span></code></dt><dd><p>Represents a single devlink port; created/destroyed by the driver. Since leaf
have 1to1 mapping to its devlink port, in user space it is referred as
<code class="docutils literal notranslate"><span class="pre">pci/&lt;bus_addr&gt;/&lt;port_index&gt;</span></code>;</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>Represents a group of rate objects (leafs and/or nodes); created/deleted by
request from the userspace; initially empty (no rate objects added). In
userspace it is referred as <code class="docutils literal notranslate"><span class="pre">pci/&lt;bus_addr&gt;/&lt;node_name&gt;</span></code>, where
<code class="docutils literal notranslate"><span class="pre">node_name</span></code> can be any identifier, except decimal number, to avoid
collisions with leafs.</p>
</dd>
</dl>
<p>API allows to configure following rate object’s parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tx_share</span></code></dt><dd><p>Minimum TX rate value shared among all other rate objects, or rate objects
that parts of the parent group, if it is a part of the same group.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tx_max</span></code></dt><dd><p>Maximum TX rate value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tx_priority</span></code></dt><dd><p>Allows for usage of strict priority arbiter among siblings. This
arbitration scheme attempts to schedule nodes based on their priority
as long as the nodes remain within their bandwidth limit. The higher the
priority the higher the probability that the node will get selected for
scheduling.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tx_weight</span></code></dt><dd><p>Allows for usage of Weighted Fair Queuing arbitration scheme among
siblings. This arbitration scheme can be used simultaneously with the
strict priority. As a node is configured with a higher rate it gets more
BW relative to it’s siblings. Values are relative like a percentage
points, they basically tell how much BW should node take relative to
it’s siblings.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">parent</span></code></dt><dd><p>Parent node name. Parent node rate limits are considered as additional limits
to all node children limits. <code class="docutils literal notranslate"><span class="pre">tx_max</span></code> is an upper limit for children.
<code class="docutils literal notranslate"><span class="pre">tx_share</span></code> is a total bandwidth distributed among children.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">tx_priority</span></code> and <code class="docutils literal notranslate"><span class="pre">tx_weight</span></code> can be used simultaneously. In that case
nodes with the same priority form a WFQ subgroup in the sibling group
and arbitration among them is based on assigned weights.</p>
<p>Arbitration flow from the high level:</p>
<ol class="arabic simple">
<li><p>Choose a node, or group of nodes with the highest priority that stays
within the BW limit and are not blocked. Use <code class="docutils literal notranslate"><span class="pre">tx_priority</span></code> as a
parameter for this arbitration.</p></li>
<li><p>If group of nodes have the same priority perform WFQ arbitration on
that subgroup. Use <code class="docutils literal notranslate"><span class="pre">tx_weight</span></code> as a parameter for this arbitration.</p></li>
<li><p>Select the winner node, and continue arbitration flow among it’s children,
until leaf node is reached, and the winner is established.</p></li>
<li><p>If all the nodes from the highest priority sub-group are satisfied, or
overused their assigned BW, move to the lower priority nodes.</p></li>
</ol>
<p>Driver implementations are allowed to support both or either rate object types
and setting methods of their parameters. Additionally driver implementation
may export nodes/leafs and their child-parent relationships.</p>
</section>
<section id="terms-and-definitions">
<h3>Terms and Definitions<a class="headerlink" href="#terms-and-definitions" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-text">Terms and Definitions</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Term</p></td>
<td><p>Definitions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PCI</span> <span class="pre">device</span></code></p></td>
<td><p>A physical PCI device having one or more PCI buses consists of one or
more PCI controllers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PCI</span> <span class="pre">controller</span></code></p></td>
<td><p>A controller consists of potentially multiple physical functions,
virtual functions and subfunctions.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Port</span> <span class="pre">function</span></code></p></td>
<td><p>An object to manage the function of a port.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Subfunction</span></code></p></td>
<td><p>A lightweight function that has parent PCI function on which it is
deployed.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Subfunction</span> <span class="pre">device</span></code></p></td>
<td><p>A bus device of the subfunction, usually on a auxiliary bus.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Subfunction</span> <span class="pre">driver</span></code></p></td>
<td><p>A device driver for the subfunction auxiliary device.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Subfunction</span> <span class="pre">management</span> <span class="pre">device</span></code></p></td>
<td><p>A PCI physical function that supports subfunction management.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Subfunction</span> <span class="pre">management</span> <span class="pre">driver</span></code></p></td>
<td><p>A device driver for PCI physical function that supports
subfunction management using devlink port interface.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Subfunction</span> <span class="pre">host</span> <span class="pre">driver</span></code></p></td>
<td><p>A device driver for PCI physical function that hosts subfunction
devices. In most cases it is same as subfunction management driver. When
subfunction is used on external controller, subfunction management and
host drivers are different.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/networking/devlink/devlink-port.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>